/*!
 * Jenkins Notifier v0.0
 *
 * @authors: Alex Ross, Gavin Elster
 *
 * Released under the MIT license
 */(function(){function f(e){var t=e.match(/\d+\) (Failure|Error):\s*?([A-z0-9\_\-]+)\S\([A-z]+\)/);return t&&t.length===3?(t[1],t[0]+" -- "+t[2]):("Error","Error in "+document.title)}function l(){i.setAttribute("src",r)}function c(){i.setAttribute("src",n)}function h(e,t,n){var r=window.webkitNotifications.createNotification(e,t,n);r.show();setTimeout(function(){r.cancel()},5e3)}function p(e){console.log("screened");console.log(e);if(e.indexOf("Error:")!==-1||e.indexOf("Failure:")!==-1||e.indexOf("ERROR ")!==-1){console.log("Base exception found in");console.log(e);var t=f(e);h("JENKERR",t[0],t[1]);c()}if(e.indexOf("SUCCESS")!==-1){h("JENKSUCC","Jenkins Passed","With flying Colors!!!");l()}}var e=["http://files.myopera.com/pvishness/blog/running.gif","http://www.picgifs.com/smileys/smileys-and-emoticons/car-driving/smileys-car-driving-120054.gif","http://www.cleanupflorida.com/sitebuildercontent/sitebuilderpictures/FloridaCrooks.gif","http://r11.imgfast.net/users/1117/26/76/98/smiles/589189497.gif","http://img.mcf.li/icons/nyancat.gif"],t=["http://www.pixeljoint.com/files/icons/dino_run.gif","http://startropics.com/images/enemies/boulder.gif","http://www.mokkaownersclub.co.uk/forum/uploads/36/police_car_by_pjuk-d337lxr.gif","http://startropics.com/images/enemies/fire.gif","http://bbsimg.ngfiles.com/2/9234000/ngbbs4495f5817f956.gif"],n="http://images.wikia.com/callofduty/images/archive/a/a9/20091224031717!Tactical_Nuke_inventory_icon_MW2.gif",r="http://fc08.deviantart.net/fs70/f/2011/326/0/9/spinning_awesome_smiley_by_hyperhippy92-d4gzhs9.gif",i=document.getElementsBySelector('img[title="In progress"]')[0];i.style.left="0";i.style.bottom="0";i.style.position="fixed";i.setAttribute("height","50");i.setAttribute("width","50");var s=document.createElement("img");s.setAttribute("src",t[Math.floor(Math.random()*t.length)]);s.setAttribute("height","70");s.setAttribute("width","70");s.style.bottom="-7px";s.style.position="fixed";document.body.appendChild(s);var o=0,u=0;setInterval(function(){if(u-80>o||o>window.innerWidth){o=0;s.setAttribute("src",t[Math.floor(Math.random()*t.length)]);u=0;i.setAttribute("src",e[Math.floor(Math.random()*e.length)])}i.style.left=o+"px";s.style.left=u-100+"px";o+=Math.random()*6;u+=Math.random()*6},100);var a=window.webkitNotifications.checkPermission();a!==0&&window.webkitNotifications.requestPermission();i.setAttribute("src",e[Math.floor(Math.random()*e.length)]);Ajax.Responders.register({onComplete:function(e,t){t.responseText&&p(t.responseText)}});console.log("whiny loaded")})();